(this["webpackJsonpreact-redux-jwt-authentication-example"]=this["webpackJsonpreact-redux-jwt-authentication-example"]||[]).push([[0],{79:function(e,t,a){e.exports=a(90)},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),o=a(13),c=a(23),l=Object(c.a)(),s=a(30),u=a(58),m=a(59),p="ALERT_SUCCESS",A="ALERT_ERROR",d="ALERT_CLEAR",g="USERS_LOGIN_REQUEST",E="USERS_LOGIN_SUCCESS",h="USERS_LOGIN_FAILURE",f="USERS_LOGOUT",b="USERS_GETALL_REQUEST",w="USERS_GETALL_SUCCESS",O="USERS_GETALL_FAILURE",v=JSON.parse(localStorage.getItem("user")),S=v?{loggedIn:!0,user:v}:{};var y=Object(s.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loggingIn:!0,user:t.user};case E:return{loggedIn:!0,user:t.user};case h:case f:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{loading:!0};case w:return{items:t.users};case O:return{error:t.error};default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{type:"alert-success",message:t.message};case A:return{type:"alert-danger",message:t.message};case d:return{};default:return e}},drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DRAWER":return!e;case"CLOSE_DRAWER":return!1;default:return e}}}),j=Object(m.createLogger)(),C=Object(s.d)(y,Object(s.a)(u.a,j));function I(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var k=a(60),R=a(61),N=a(68),L=a(69),x=a(146),G={success:function(e){return{type:p,message:e}},error:function(e){return{type:A,message:e}},clear:function(){return{type:d}}};var Q={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("http://localhost:3001/users/login",a).then(B).then((function(e){return e.token&&localStorage.setItem("user",JSON.stringify(e)),e}))},logout:U,getAll:function(){var e={method:"GET",headers:I()};return fetch("http://localhost:3001/users/me",e).then(B)}};function U(){var e={method:"POST",headers:I()};return localStorage.removeItem("user"),fetch("http://localhost:3001/users/me/logout",e).then(B)}function B(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&U();var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var M={login:function(e,t){return function(a){a({type:g,user:{username:e}}),Q.login(e,t).then((function(e){a(function(e){return{type:E,user:e}}(e)),l.push("/")}),(function(e){a(function(e){return{type:h,error:e}}(e)),a(G.error(e))}))}},logout:function(){return Q.logout(),{type:f}},getAll:function(){return function(e){e({type:b}),Q.getAll().then((function(t){return e({type:w,users:t})}),(function(t){return e(function(e){return{type:O,error:e}}(t))}))}}};var D=function(){return{type:"OPEN_DRAWER"}},T=D,J=function(){return{type:"CLOSE_DRAWER"}},P=a(70),_=function(e){var t=e.component,a=Object(P.a)(e,["component"]);return r.a.createElement(x.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(x.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},H=a(16),K=a(26),Y=a(41),z=a(128),W=a(20),F=a(18),V=a(3),Z=a(135),q=a(145),X=a(136),$=a(137),ee=a(44),te=a(143),ae=a(134),ne=a(132),re=a(144),ie=a(64),oe=a.n(ie),ce=a(54),le=a.n(ce),se=a(53),ue=a.n(se),me=a(65),pe=a.n(me),Ae=a(131),de=a(138),ge=a(133),Ee=a(63),he=a.n(Ee),fe=a(66),be=a.n(fe),we=a(67),Oe=a.n(we),ve=a(95),Se=a(139),ye=a(140),je=a(55),Ce=a.n(je),Ie=a(40),ke=a.n(Ie),Re=Object(z.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(H.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(H.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(W.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(W.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(H.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(H.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(H.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(Y.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),Ne=function(){var e=Re(),t=r.a.useState(null),a=Object(K.a)(t,2),n=a[0],i=a[1],c=r.a.useState(null),l=Object(K.a)(c,2),s=l[0],u=l[1],m=Object(F.a)(),p=Object(o.d)((function(e){return e.drawer})),A=Object(o.c)(),d=Boolean(n),g=Boolean(s),E=function(e){i(e.currentTarget)},h=function(){u(null)},f=function(){i(null),h()},b="primary-search-account-menu",w=r.a.createElement(re.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:b,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:f},r.a.createElement(ne.a,{onClick:f},"Profile"),r.a.createElement(ne.a,{onClick:f},"My account")),O=r.a.createElement(re.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:h},r.a.createElement(ne.a,null,r.a.createElement(ge.a,{"aria-label":"show 4 new mails",color:"inherit"},r.a.createElement(ae.a,{badgeContent:4,color:"secondary"},r.a.createElement(ke.a,null))),r.a.createElement("p",null,"Messages")),r.a.createElement(ne.a,null,r.a.createElement(ge.a,{"aria-label":"show 11 new notifications",color:"inherit"},r.a.createElement(ae.a,{badgeContent:11,color:"secondary"},r.a.createElement(ue.a,null))),r.a.createElement("p",null,"Notifications")),r.a.createElement(ne.a,{onClick:E},r.a.createElement(ge.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(le.a,null)),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:e.root},r.a.createElement(Z.a,null),r.a.createElement(X.a,{position:"static",className:Object(V.a)(e.appBar,Object(H.a)({},e.appBarShift,p))},r.a.createElement($.a,null,r.a.createElement(ge.a,{onClick:function(){return A(T())},edge:"start",className:Object(V.a)(e.menuButton,p&&e.hide),color:"inherit","aria-label":"open drawer"},r.a.createElement(he.a,null)),r.a.createElement(ee.a,{className:e.title,variant:"h6",noWrap:!0},"Material-UI"),r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(oe.a,null)),r.a.createElement(te.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})),r.a.createElement("div",{className:e.grow}),r.a.createElement("div",{className:e.sectionDesktop},r.a.createElement(ge.a,{"aria-label":"show 4 new mails",color:"inherit"},r.a.createElement(ae.a,{badgeContent:4,color:"secondary"},r.a.createElement(ke.a,null))),r.a.createElement(ge.a,{"aria-label":"show 17 new notifications",color:"inherit"},r.a.createElement(ae.a,{badgeContent:17,color:"secondary"},r.a.createElement(ue.a,null))),r.a.createElement(ge.a,{edge:"end","aria-label":"account of current user","aria-controls":b,"aria-haspopup":"true",onClick:E,color:"inherit"},r.a.createElement(le.a,null))),r.a.createElement("div",{className:e.sectionMobile},r.a.createElement(ge.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},r.a.createElement(pe.a,null))))),r.a.createElement(q.a,{className:e.drawer,variant:"persistent",anchor:"left",open:p,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(ge.a,{onClick:function(){return A(J())}},"ltr"===m.direction?r.a.createElement(be.a,null):r.a.createElement(Oe.a,null))),r.a.createElement(de.a,null),r.a.createElement(Ae.a,null,["Inbox","Starred","Send email","Drafts"].map((function(e,t){return r.a.createElement(ve.a,{button:!0,key:e},r.a.createElement(Se.a,null,t%2===0?r.a.createElement(Ce.a,null):r.a.createElement(ke.a,null)),r.a.createElement(ye.a,{primary:e}))}))),r.a.createElement(de.a,null),r.a.createElement(Ae.a,null,["All mail","Trash","Spam"].map((function(e,t){return r.a.createElement(ve.a,{button:!0,key:e},r.a.createElement(Se.a,null,t%2===0?r.a.createElement(Ce.a,null):r.a.createElement(ke.a,null)),r.a.createElement(ye.a,{primary:e}))})))),O,w)},Le=a(141),xe=a(92),Ge=Object(z.a)((function(e){return{drawer:{width:240,flexShrink:0},root:{flexGrow:1},paper:{height:140,width:100},control:{padding:e.spacing(2)},drawerPaper:{width:240},drawerHeader:Object(Y.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},contentCenter:{marginLeft:200}}})),Qe=function(){var e=Object(o.d)((function(e){return e.drawer})),t=r.a.useState(2),a=Object(K.a)(t,1)[0],n=Ge();return r.a.createElement("div",null,r.a.createElement(Ne,null),r.a.createElement("main",{className:Object(V.a)(n.content,Object(H.a)({},n.contentShift,e))},r.a.createElement("div",{className:n.contentCenter},r.a.createElement(Le.a,{container:!0,className:n.root,spacing:2},r.a.createElement(Le.a,{item:!0,xs:12},r.a.createElement(Le.a,{container:!0,justify:"center",spacing:a},[0,1,2,3,4,5,6,7,8,9,10,11,12,13].map((function(e){return r.a.createElement(Le.a,{key:e,item:!0},r.a.createElement(xe.a,null,r.a.createElement("img",{alt:"",src:"https://theme.zdassets.com/theme_assets/43400/87a1ef48e43b8cf114017e3ad51b801951b20fcf.jpg"})))}))))))))},Ue=function(){var e=Object(o.d)((function(e){return e.authentication}));console.log(e);var t=Object(o.c)(),a=Object(n.useState)(),i=Object(K.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(""),u=Object(K.a)(s,2),m=u[0],p=u[1],A=Object(n.useState)(""),d=Object(K.a)(A,2),g=d[0],E=d[1];return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:function(e){e.preventDefault(),l(!0),m&&g&&t(M.login(m,g))}},r.a.createElement("div",{className:"form-group"+(c&&!m?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:m,onChange:function(e){return p(e.target.value)}}),c&&!m&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(c&&!g?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:g,onChange:function(e){return E(e.target.value)}}),c&&!g&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),e&&r.a.createElement("img",{alt:"",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}))))},Be=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e){var n;Object(k.a)(this,a);var r=(n=t.call(this,e)).props.dispatch;return l.listen((function(e,t){r(G.clear())})),n}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(x.c,{history:l},r.a.createElement("div",null,r.a.createElement(_,{exact:!0,path:"/",component:Qe}),r.a.createElement(x.b,{path:"/login",component:Ue}))))))}}]),a}(r.a.Component);var Me=Object(o.b)((function(e){return{alert:e.alert}}))(Be);Object(i.render)(r.a.createElement(o.a,{store:C},r.a.createElement(Me,null)),document.getElementById("app"))}},[[79,1,2]]]);
//# sourceMappingURL=main.b313c6c2.chunk.js.map